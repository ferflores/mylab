function MyBlog(){var t=null;this.firstLoaded=!1,this.init=function(){null==t&&(t=this),t.getPageNumber(),t.loadPosts(),t.bindMainEvents(),t.bindWindowEvents()},this.bindWindowEvents=function(){null==window.onresize&&(window.onresize=function(){t.resize()})},this.bindMainEvents=function(){$("#upArrow").on("mouseover",function(){$(this).animate({width:"40"},"fast")}),$("#downArrow").on("mouseover",function(){$(this).animate({width:"40"},"fast")}),$("#upArrow").on("mouseout",function(){$(this).animate({width:"30"},"fast")}),$("#downArrow").on("mouseout",function(){$(this).animate({width:"30"},"fast")}),$("#downArrow").on("click",function(){t.getNextPage()}),$("#upArrow").on("click",function(){t.getPrevPage()})},this.bindPostsEvents=function(){$(".post-title").on("mouseover",function(){t.hoverPost(this)}),$(".preview-img").on("mouseover",function(){t.hoverPost(this)}),$(".post-title").on("mouseout",function(){t.mouseOutPost(this)}),$(".preview-img").on("mouseout",function(){t.mouseOutPost(this)}),$(".post-title").on("click",function(){t.showPost($(this).closest(".post").attr("data-id"))}),$(".preview-img").on("click",function(){t.showPost($(this).closest(".post").attr("data-id"))})},this.bindSinglePostEvents=function(){$(".fbshare").on("click",function(){FBShareOp(MyBlog.currentPost.title,MyBlog.currentPost.content,"http://ferflores.net"+MyBlog.currentPost.img,"http://www.ferflores.net/?exp="+MyBlog.currentPost.id)}),$("#canvasTitleText").removeClass("zoomIn"),$("#canvasTitleText").addClass("zoomOut"),setTimeout(function(){$("#canvasTitleText").html(MyBlog.currentPost.content),$("#canvasTitleText").removeClass("zoomOut"),$("#canvasTitleText").addClass("zoomIn")},1e3)},this.resize=function(){$.each($(".canvasElement"),function(t,s){s.width=$(s).parent().width(),s.height=$(s).parent().height()}),MyBlog.currentObject.resize()},this.loadPosts=function(s){var o=MyBlog.pageNumber;$("#postsGrid").empty();var e={p:o};if(o||$("#upArrowDiv").hide(),null==s){var n={URL:"/getPosts",data:e,async:!0,callBack:t.buildPosts,requestCallBack:t.requestPostsCallBack};(new AjaxRequest).request(n)}else t.buildPostsLocal(s)},this.loadPostById=function(s){var o={exp:s},e={URL:"/getPost",data:o,async:!0,callBack:t.buildPost,requestCallBack:null};(new AjaxRequest).request(e)},this.buildPost=function(s){var o=JSON.parse(s),e={id:o.id,scriptUrl:o.scriptUrl,scriptClass:o.scriptClass,title:o.title,content:o.content,img:o.img};MyBlog.postElements.push(e),t.showPost(o.id)},this.buildPosts=function(s){$("#postsGrid").empty();var o=JSON.parse(s),e={pageNumber:MyBlog.pageNumber,noBack:o.noBack,lastPost:o.lastPost,posts:o.posts};if(MyBlog.postPages.push(e),o.noBack?$("#upArrowDiv").hide():$("#upArrowDiv").show(),o.lastPost?$("#downArrowDiv").hide():$("#downArrowDiv").show(),t.buildPostsHtml(o.posts),!t.firstLoaded){var n=getParameterByName("exp");null!=n&&isNumber(n)&&n>0?t.loadPostById(n):(t.firstLoaded=!0,t.showPost(MyBlog.postElements[0].id))}},this.buildPostsLocal=function(s){$("#postsGrid").empty(),s.noBack?$("#upArrowDiv").hide():$("#upArrowDiv").show(),s.lastPost?$("#downArrowDiv").hide():$("#downArrowDiv").show(),t.buildPostsHtml(s.posts)},this.buildPostsHtml=function(s){$.each(s,function(s,o){var e="<div class='post' style='display:none' data-id='"+o.id+"'";if(e+=" data-script-url='"+o.scriptUrl+"' data-script-class='"+o.scriptClass+"'>",e+="<div class='post-title'> "+o.title+"</div>",e+="<div>",e+="<img class='preview-img' src='"+o.img+"'>",e+="</div>",e+="</div>",$("#postsGrid").append(e),!t.postIsLoaded(o.id)){var n={id:o.id,scriptUrl:o.scriptUrl,scriptClass:o.scriptClass,title:o.title,content:o.content,img:o.img};MyBlog.postElements.push(n)}}),$.each($(".post"),function(t,s){$(s).fadeIn("slow")}),t.bindPostsEvents()},this.postIsLoaded=function(t){var s=!1;return $.each(MyBlog.postElements,function(o,e){return e.id==t?(s=!0,!1):void 0}),s},this.hoverPost=function(t){var s=$(t).closest(".post");$(s).css("backgroundColor","rgba(0,0,0,0.5")},this.mouseOutPost=function(t){var s=$(t).closest(".post");$(s).css("backgroundColor","rgba(0,0,0,0")},this.getPageNumber=function(){var t=getParameterByName("p"),s=t.length>0?t:"1";s=isNumber(s)?parseInt(s):1,s=1>s?1:s,MyBlog.pageNumber=s},this.getNextPage=function(){MyBlog.pageNumber++,$("#postsGrid").empty();var s=t.getLocalPage(MyBlog.pageNumber);t.loadPosts(s)},this.getLocalPage=function(t){var s=null;return $.each(MyBlog.postPages,function(o,e){return e.pageNumber==t?(s=e,!1):void 0}),s},this.getPrevPage=function(){if(MyBlog.pageNumber>0){MyBlog.pageNumber--;var s=t.getLocalPage(MyBlog.pageNumber);t.loadPosts(s)}},this.requestPostsCallBack=function(){$("#postsGrid").append("<div id='postsLoading'><img id='postsLoadingImg' src='/img/loader.gif'></div>")},this.runScript=function(t){{var s=[],o=$(".canvasMain"),e=$(".canvasBg");o.width,o.height}$(".canvasMain").remove(),$(".canvasBg").remove(),$("#canvasArea").append("<canvas id='canvasBg' class='canvasBg canvasElement'></canvas> <canvas id='canvasMain' class='canvasMain canvasElement'></canvas>"),o=$(".canvasMain")[0],e=$(".canvasBg")[0],o.width=$("#canvasArea").width(),o.height=$("#canvasArea").height(),e.width=$("#canvasArea").width(),e.height=$("#canvasArea").height(),s.push(e),s.push(canvasMain);var n=new window[t.scriptClass];MyBlog.currentObject=n,n.run(s)},this.showPost=function(s){t.bindSinglePostEvents(),$("#directLink").attr("href","http://www.ferflores.net/?exp="+s);var o=null;null!=MyBlog.currentObject&&(MyBlog.currentObject.stop(),MyBlog.currentObject.reset(),delete MyBlog.currentObject,MyBlog.currentObject=null),$.each(MyBlog.postElements,function(t,e){return e.id==s?(o=e,MyBlog.currentPost=e,!1):void 0}),null!=o&&("undefined"!=typeof window[o.scriptClass]?t.runScript(o):$.getScript(o.scriptUrl,function(){t.runScript(o)}))}}function Common(){}MyBlog.postElements=[],MyBlog.postPages=[],MyBlog.pageNumber=1,MyBlog.currentObject=null,MyBlog.currentPost=null;